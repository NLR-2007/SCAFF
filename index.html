<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMART CROP ADVISOR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2E8B57;
            --secondary-color: #FFA500;
            --light-color: #F5F5F5;
            --dark-color: #333;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
        }
        
        .navbar {
            background-color: var(--primary-color);
        }
        
        .navbar-brand {
            font-weight: bold;
            color: white !important;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: #267349;
            border-color: #267349;
        }
        
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            background-color: var(--primary-color);
            color: white;
            border-radius: 10px 10px 0 0 !important;
        }
        
        .dashboard-icon {
            font-size: 24px;
            margin-right: 10px;
            color: var(--primary-color);
        }
        
        .language-selector {
            width: 120px;
            display: inline-block;
        }
        
        .crop-image {
            max-width: 100%;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .feature-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .weather-alert {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        
        .market-table {
            font-size: 0.9rem;
        }
        
        .market-table th {
            background-color: var(--primary-color);
            color: white;
        }
        
        .forum-post {
            border-left: 3px solid var(--primary-color);
            padding-left: 15px;
            margin-bottom: 20px;
        }
        
        .officer-badge {
            background-color: var(--primary-color);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }
        
        @media (max-width: 768px) {
            .dashboard-icon {
                font-size: 20px;
                margin-right: 5px;
            }
            
            .card {
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-seedling"></i> SMART CROP ADVISOR
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto" id="main-nav">
                    <li class="nav-item"><a class="nav-link" href="#" id="nav-home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" id="nav-forum">Community Forum</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" id="nav-about">About</a></li>
                </ul>
                <div class="d-flex">
                    <select class="form-select form-select-sm language-selector me-2" id="languageSelector">
                        <option value="en">English</option>
                        <option value="hi">Hindi</option>
                        <option value="te">Telugu</option>
                        <option value="ta">Tamil</option>
                    </select>
                    <button class="btn btn-sm btn-outline-light" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> <span id="logout-text">Logout</span></button>
                </div>
            </div>
        </div>
    </nav>

   <!-- Login Section -->
<div class="container" id="loginSection">
    <div class="login-container">
        <h2 class="text-center mb-4">Login to Your Account</h2>
        <div class="alert alert-danger d-none" id="loginError"></div>
        <form id="loginForm">
            <div class="mb-3">
                <label for="username" class="form-label">Username</label>
                <input type="text" class="form-control" id="username" required>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" required>
            </div>
            <div class="mb-3">
                <label for="role" class="form-label">Login as</label>
                <select class="form-select" id="role">
                    <option value="farmer">Farmer</option>
                    <option value="officer">Officer</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>
        <!-- Register Redirect -->
        <p class="text-center mt-3">
            Donâ€™t have an account? 
            <a href="registration.html">Register here</a>
        </p>
    </div>
</div>


    <!-- Farmer Dashboard -->
    <div class="container d-none" id="farmerDashboard">
        <div class="row mt-4">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-user dashboard-icon"></i> <span id="profile-title">Profile</span></h5>
                    </div>
                    <div class="card-body">
                        <div id="farmerProfile">
                            <p><strong id="name-label">Name:</strong> Rajesh Kumar</p>
                            <p><strong id="soil-label">Soil Type:</strong> Black Soil</p>
                            <p><strong id="land-label">Land Size:</strong> 2.5 acres</p>
                            <p><strong id="crop-label">Current Crop:</strong> Cotton</p>
                            <button class="btn btn-sm btn-outline-primary mt-2" id="editProfileBtn"><i class="fas fa-edit"></i> <span id="edit-profile-text">Edit Profile</span></button>
                        </div>
                        <div id="editProfileForm" class="d-none">
                            <div class="mb-2">
                                <label class="form-label"><span id="soil-type-label">Soil Type</span></label>
                                <select class="form-select" id="soilType">
                                    <option value="black">Black Soil</option>
                                    <option value="red">Red Soil</option>
                                    <option value="sandy">Sandy Soil</option>
                                    <option value="clay">Clay Soil</option>
                                </select>
                            </div>
                            <div class="mb-2">
                                <label class="form-label"><span id="land-size-label">Land Size (acres)</span></label>
                                <input type="number" class="form-control" id="landSize" value="2.5">
                            </div>
                            <div class="mb-2">
                                <label class="form-label"><span id="current-crop-label">Current Crop</span></label>
                                <select class="form-select" id="currentCrop">
                                    <option value="paddy">Paddy</option>
                                    <option value="wheat">Wheat</option>
                                    <option value="cotton">Cotton</option>
                                    <option value="maize">Maize</option>
                                </select>
                            </div>
                            <button class="btn btn-sm btn-primary" id="saveProfileBtn"><i class="fas fa-save"></i> <span id="save-profile-text">Save</span></button>
                            <button class="btn btn-sm btn-outline-secondary" id="cancelEditBtn"><span id="cancel-text">Cancel</span></button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-cloud-sun dashboard-icon"></i> <span id="weather-title">Weather Alerts</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="alert weather-alert">
                            <i class="fas fa-exclamation-triangle"></i> <strong id="alert1">Heavy rainfall expected in next 48 hours.</strong>
                        </div>
                        <div class="alert weather-alert mt-2">
                            <i class="fas fa-temperature-high"></i> <strong id="alert2">Temperature expected to rise to 38Â°C by weekend.</strong>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-seedling dashboard-icon"></i> <span id="crop-title">Crop Recommendation</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label"><span id="select-soil-label">Select Soil Type for Recommendation</span></label>
                            <select class="form-select" id="soilTypeRecommendation">
                                <option value="black">Black Soil</option>
                                <option value="red">Red Soil</option>
                                <option value="sandy">Sandy Soil</option>
                                <option value="clay">Clay Soil</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" id="getRecommendationBtn"><i class="fas fa-search"></i> <span id="get-recommendation-text">Get Recommendation</span></button>
                        
                        <div class="mt-3" id="recommendationResult">
                            <h5 id="recommended-crops-text">Recommended Crops:</h5>
                            <ul id="cropRecommendationList">
                                <li>Cotton</li>
                                <li>Soybean</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-calculator dashboard-icon"></i> <span id="micro-title">Micro-Advisory</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label"><span id="select-crop-label">Select Crop for Advisory</span></label>
                            <select class="form-select" id="cropAdvisory">
                                <option value="paddy">Paddy</option>
                                <option value="wheat">Wheat</option>
                                <option value="cotton">Cotton</option>
                                <option value="maize">Maize</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label"><span id="land-size-advisory-label">Land Size (acres)</span></label>
                            <input type="number" class="form-control" id="landSizeAdvisory" value="2.5">
                        </div>
                        <button class="btn btn-primary" id="calculateAdvisoryBtn"><i class="fas fa-calculator"></i> <span id="calculate-text">Calculate</span></button>
                        
                        <div class="mt-3" id="advisoryResult">
                            <h5 id="advisory-for-text">Advisory for Cotton (2.5 acres):</h5>
                            <ul>
                                <li id="seed-amount">Seed Amount: 12.5 kg</li>
                                <li id="fertilizer-amount">Fertilizer: 125 kg (NPK 50kg, Urea 75kg)</li>
                                <li id="water-amount">Water Requirement: 1,25,000 liters</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0"><i class="fas fa-camera dashboard-icon"></i> <span id="disease-title">Disease Detection</span></h5>
                            </div>
                            <div class="card-body">
                                <input type="file" class="form-control mb-2" id="cropImageUpload" accept="image/*">
                                <button class="btn btn-primary w-100" id="uploadImageBtn"><i class="fas fa-upload"></i> <span id="upload-text">Upload Image</span></button>
                                <div class="mt-3" id="diseaseResult">
                                    <p id="upload-instruction">Upload an image of your crop for disease detection.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0"><i class="fas fa-chart-line dashboard-icon"></i> <span id="market-title">Market Prices</span></h5>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-sm market-table">
                                        <thead>
                                            <tr>
                                                <th id="crop-header">Crop</th>
                                                <th id="price-header">Price (â‚¹/kg)</th>
                                                <th id="change-header">Change</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Paddy</td>
                                                <td>22.50</td>
                                                <td class="text-success">+2%</td>
                                            </tr>
                                            <tr>
                                                <td>Wheat</td>
                                                <td>25.75</td>
                                                <td class="text-danger">-1%</td>
                                            </tr>
                                            <tr>
                                                <td>Cotton</td>
                                                <td>65.00</td>
                                                <td class="text-success">+3%</td>
                                            </tr>
                                            <tr>
                                                <td>Maize</td>
                                                <td>20.30</td>
                                                <td class="text-success">+1.5%</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Officer Dashboard -->
    <div class="container d-none" id="officerDashboard">
        <div class="row mt-4">
            <div class="col-md-12">
                <h2><i class="fas fa-user-shield"></i> <span id="officer-dashboard-title">Officer Dashboard</span></h2>
                <hr>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-users dashboard-icon"></i> <span id="farmers-title">Registered Farmers</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th id="name-header">Name</th>
                                        <th id="soil-header">Soil Type</th>
                                        <th id="land-header">Land Size</th>
                                        <th id="crops-header">Current Crop</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Rajesh Kumar</td>
                                        <td>Black Soil</td>
                                        <td>2.5 acres</td>
                                        <td>Cotton</td>
                                    </tr>
                                    <tr>
                                        <td>Suresh Patel</td>
                                        <td>Red Soil</td>
                                        <td>3.2 acres</td>
                                        <td>Paddy</td>
                                    </tr>
                                    <tr>
                                        <td>Anita Singh</td>
                                        <td>Clay Soil</td>
                                        <td>1.8 acres</td>
                                        <td>Wheat</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-bullhorn dashboard-icon"></i> <span id="send-alert-title">Send Pest/Disease Alert</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label"><span id="alert-title-label">Alert Title</span></label>
                            <input type="text" class="form-control" id="alertTitle">
                        </div>
                        <div class="mb-3">
                            <label class="form-label"><span id="alert-message-label">Message</span></label>
                            <textarea class="form-control" id="alertMessage" rows="3"></textarea>
                        </div>
                        <button class="btn btn-primary" id="sendAlertBtn"><i class="fas fa-paper-plane"></i> <span id="send-alert-text">Send Alert</span></button>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-envelope dashboard-icon"></i> <span id="send-recommendation-title">Send Recommendation</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label"><span id="select-farmer-label">Select Farmer</span></label>
                            <select class="form-select" id="farmerSelect">
                                <option value="rajesh">Rajesh Kumar</option>
                                <option value="suresh">Suresh Patel</option>
                                <option value="anita">Anita Singh</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label"><span id="recommendation-label">Recommendation</span></label>
                            <textarea class="form-control" id="recommendationText" rows="3"></textarea>
                        </div>
                        <button class="btn btn-primary" id="sendRecommendationBtn"><i class="fas fa-paper-plane"></i> <span id="send-recommendation-text">Send Recommendation</span></button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-history dashboard-icon"></i> <span id="sent-recommendations-title">Sent Recommendations</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <strong>To Rajesh Kumar (20 Oct 2023):</strong> Consider intercropping with pulses to improve soil fertility.
                        </div>
                        <div class="alert alert-info mt-2">
                            <strong>To Suresh Patel (18 Oct 2023):</strong> Your paddy crop may need additional nitrogen fertilizer based on soil test.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Community Forum -->
    <div class="container d-none" id="communityForum">
        <div class="row mt-4">
            <div class="col-md-12">
                <h2><i class="fas fa-comments"></i> <span id="community-forum-title">Community Forum</span></h2>
                <hr>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-plus-circle dashboard-icon"></i> <span id="new-post-title">Create New Post</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label"><span id="post-title-label">Title</span></label>
                            <input type="text" class="form-control" id="postTitle">
                        </div>
                        <div class="mb-3">
                            <label class="form-label"><span id="post-content-label">Content</span></label>
                            <textarea class="form-control" id="postContent" rows="3"></textarea>
                        </div>
                        <button class="btn btn-primary" id="createPostBtn"><i class="fas fa-plus"></i> <span id="create-post-text">Create Post</span></button>
                    </div>
                </div>

                <h4 class="mt-4" id="discussions-title">Discussions</h4>
                
                <div class="forum-post">
                    <h5>Best fertilizer for black soil</h5>
                    <p class="text-muted">Posted by Rajesh Kumar on 20 Oct 2023</p>
                    <p>What is the best fertilizer combination for cotton cultivation in black soil? My current yield is not satisfactory.</p>
                    <div class="forum-reply">
                        <p><span class="officer-badge">Officer</span> <strong>Agricultural Officer:</strong> For black soil, we recommend a balanced NPK fertilizer with additional zinc. Use 100kg NPK and 25kg zinc per acre.</p>
                    </div>
                    <div class="forum-reply">
                        <p><strong>Suresh Patel:</strong> I've had good results with vermicompost along with regular fertilizers.</p>
                    </div>
                    <textarea class="form-control mt-2" rows="2" placeholder="Add your reply..."></textarea>
                    <button class="btn btn-sm btn-primary mt-2"><span id="reply-text">Reply</span></button>
                </div>

                <div class="forum-post">
                    <h5>Pest control in paddy fields</h5>
                    <p class="text-muted">Posted by Suresh Patel on 18 Oct 2023</p>
                    <p>I'm noticing brown spots on paddy leaves. What could be the cause and how to treat it?</p>
                    <div class="forum-reply">
                        <p><span class="officer-badge">Officer</span> <strong>Agricultural Officer:</strong> This could be brown spot disease. Apply fungicide containing azoxystrobin. Also ensure proper water management.</p>
                    </div>
                    <textarea class="form-control mt-2" rows="2" placeholder="Add your reply..."></textarea>
                    <button class="btn btn-sm btn-primary mt-2"><span id="reply2-text">Reply</span></button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-exclamation-circle dashboard-icon"></i> <span id="active-alerts-title">Active Alerts</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-warning">
                            <strong>Pest Alert:</strong> Fall armyworm detected in nearby regions. Check your maize crops regularly.
                        </div>
                        <div class="alert alert-info mt-2">
                            <strong>Weather Advisory:</strong> Unseasonal rainfall expected next week. Harvest ready crops if possible.
                        </div>
                    </div>
                </div>

                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-star dashboard-icon"></i> <span id="tips-title">Farming Tips</span></h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Test soil every season for optimal fertilizer use</li>
                            <li class="list-group-item">Practice crop rotation to maintain soil health</li>
                            <li class="list-group-item">Use drip irrigation for water conservation</li>
                            <li class="list-group-item">Consider intercropping for additional income</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Page -->
    <div class="container d-none" id="aboutPage">
        <div class="row mt-4">
            <div class="col-md-12">
                <h2><i class="fas fa-info-circle"></i> <span id="about-title">About Smart Crop Advisor</span></h2>
                <hr>
                <p id="about-content1">Smart Crop Advisor is a comprehensive platform designed to support small and marginal farmers with data-driven agricultural advice. Our system provides personalized crop recommendations, micro-advisory for input management, weather alerts, and market information.</p>
                
                <h4 class="mt-4" id="features-title">Features</h4>
                <ul>
                    <li id="feature1">Personalized crop recommendations based on soil type</li>
                    <li id="feature2">Precise seed and fertilizer calculations</li>
                    <li id="feature3">Weather alerts and advisory</li>
                    <li id="feature4">Market price information</li>
                    <li id="feature5">Community forum for knowledge sharing</li>
                    <li id="feature6">Direct communication with agricultural officers</li>
                </ul>
                
                <h4 class="mt-4" id="contact-title">Contact</h4>
                <p id="contact-content">For support and queries, please contact your local agricultural office or email us at support@smartcropadvisor.org</p>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white text-center py-3 mt-5">
        <div class="container">
            <p class="mb-0">&copy; 2023 Smart Crop Advisor. <span id="rights-text">All rights reserved.</span></p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Dummy database simulation
        const dummyDatabase = {
            users: {
                "farmer123": { password: "farmer123", role: "farmer", name: "Rajesh Kumar", soilType: "black", landSize: 2.5, currentCrop: "cotton" },
                "officer123": { password: "officer123", role: "officer", name: "Agricultural Officer" }
            },
            recommendations: [
                { to: "Rajesh Kumar", from: "Officer", message: "Consider intercropping with pulses to improve soil fertility.", date: "2023-10-20" },
                { to: "Suresh Patel", from: "Officer", message: "Your paddy crop may need additional nitrogen fertilizer based on soil test.", date: "2023-10-18" }
            ],
            forumPosts: [
                { title: "Best fertilizer for black soil", author: "Rajesh Kumar", content: "What is the best fertilizer combination for cotton cultivation in black soil? My current yield is not satisfactory.", date: "2023-10-20", replies: [
                    { author: "Agricultural Officer", content: "For black soil, we recommend a balanced NPK fertilizer with additional zinc. Use 100kg NPK and 25kg zinc per acre.", isOfficer: true },
                    { author: "Suresh Patel", content: "I've had good results with vermicompost along with regular fertilizers." }
                ]},
                { title: "Pest control in paddy fields", author: "Suresh Patel", content: "I'm noticing brown spots on paddy leaves. What could be the cause and how to treat it?", date: "2023-10-18", replies: [
                    { author: "Agricultural Officer", content: "This could be brown spot disease. Apply fungicide containing azoxystrobin. Also ensure proper water management.", isOfficer: true }
                ]}
            ],
            alerts: [
                { title: "Pest Alert", content: "Fall armyworm detected in nearby regions. Check your maize crops regularly.", date: "2023-10-19" },
                { title: "Weather Advisory", content: "Unseasonal rainfall expected next week. Harvest ready crops if possible.", date: "2023-10-17" }
            ]
        };

        // Crop recommendation rules
        const cropRecommendations = {
            "black": ["Cotton", "Soybean", "Wheat", "Sorghum"],
            "red": ["Paddy", "Groundnut", "Tobacco", "Potato"],
            "sandy": ["Peanuts", "Watermelon", "Peaches", "Tomatoes"],
            "clay": ["Wheat", "Rice", "Clover", "Cabbage"]
        };

        // Micro-advisory formulas (per acre)
        const advisoryFormulas = {
            "paddy": { seeds: 20, fertilizer: 100, water: 1000000 },
            "wheat": { seeds: 40, fertilizer: 80, water: 600000 },
            "cotton": { seeds: 5, fertilizer: 50, water: 500000 },
            "maize": { seeds: 15, fertilizer: 90, water: 700000 }
        };

        // Current user state
        let currentUser = null;

        // Language translations
        const translations = {
            en: {
                // Navigation
                "nav-home": "Home",
                "nav-forum": "Community Forum",
                "nav-about": "About",
                "logout-text": "Logout",
                
                // Login
                "login-title": "Login to Your Account",
                
                // Farmer Dashboard
                "profile-title": "Profile",
                "name-label": "Name:",
                "soil-label": "Soil Type:",
                "land-label": "Land Size:",
                "crop-label": "Current Crop:",
                "edit-profile-text": "Edit Profile",
                "soil-type-label": "Soil Type",
                "land-size-label": "Land Size (acres)",
                "current-crop-label": "Current Crop",
                "save-profile-text": "Save",
                "cancel-text": "Cancel",
                
                "weather-title": "Weather Alerts",
                "alert1": "Heavy rainfall expected in next 48 hours.",
                "alert2": "Temperature expected to rise to 38Â°C by weekend.",
                
                "crop-title": "Crop Recommendation",
                "select-soil-label": "Select Soil Type for Recommendation",
                "get-recommendation-text": "Get Recommendation",
                "recommended-crops-text": "Recommended Crops:",
                
                "micro-title": "Micro-Advisory",
                "select-crop-label": "Select Crop for Advisory",
                "land-size-advisory-label": "Land Size (acres)",
                "calculate-text": "Calculate",
                "advisory-for-text": "Advisory for",
                "seed-amount": "Seed Amount:",
                "fertilizer-amount": "Fertilizer:",
                "water-amount": "Water Requirement:",
                
                "disease-title": "Disease Detection",
                "upload-text": "Upload Image",
                "upload-instruction": "Upload an image of your crop for disease detection.",
                
                "market-title": "Market Prices",
                "crop-header": "Crop",
                "price-header": "Price (â‚¹/kg)",
                "change-header": "Change",
                
                // Officer Dashboard
                "officer-dashboard-title": "Officer Dashboard",
                "farmers-title": "Registered Farmers",
                "name-header": "Name",
                "soil-header": "Soil Type",
                "land-header": "Land Size",
                "crops-header": "Current Crop",
                
                "send-alert-title": "Send Pest/Disease Alert",
                "alert-title-label": "Alert Title",
                "alert-message-label": "Message",
                "send-alert-text": "Send Alert",
                
                "send-recommendation-title": "Send Recommendation",
                "select-farmer-label": "Select Farmer",
                "recommendation-label": "Recommendation",
                "send-recommendation-text": "Send Recommendation",
                
                "sent-recommendations-title": "Sent Recommendations",
                
                // Community Forum
                "community-forum-title": "Community Forum",
                "new-post-title": "Create New Post",
                "post-title-label": "Title",
                "post-content-label": "Content",
                "create-post-text": "Create Post",
                "discussions-title": "Discussions",
                "reply-text": "Reply",
                "reply2-text": "Reply",
                "active-alerts-title": "Active Alerts",
                "tips-title": "Farming Tips",
                
                // About Page
                "about-title": "About Smart Crop Advisor",
                "about-content1": "Smart Crop Advisor is a comprehensive platform designed to support small and marginal farmers with data-driven agricultural advice. Our system provides personalized crop recommendations, micro-advisory for input management, weather alerts, and market information.",
                "features-title": "Features",
                "feature1": "Personalized crop recommendations based on soil type",
                "feature2": "Precise seed and fertilizer calculations",
                "feature3": "Weather alerts and advisory",
                "feature4": "Market price information",
                "feature5": "Community forum for knowledge sharing",
                "feature6": "Direct communication with agricultural officers",
                "contact-title": "Contact",
                "contact-content": "For support and queries, please contact your local agricultural office or email us at support@smartcropadvisor.org",
                
                // Footer
                "rights-text": "All rights reserved."
            },
            hi: {
                // Hindi translations would go here
            },
            te: {
                // Telugu translations would go here
            },
            ta: {
                // Tamil translations would go here
            }
        };

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Set up event listeners
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            document.getElementById('languageSelector').addEventListener('change', changeLanguage);
            
            // Farmer dashboard buttons
            document.getElementById('editProfileBtn').addEventListener('click', showEditProfile);
            document.getElementById('saveProfileBtn').addEventListener('click', saveProfile);
            document.getElementById('cancelEditBtn').addEventListener('click', cancelEdit);
            document.getElementById('getRecommendationBtn').addEventListener('click', getRecommendation);
            document.getElementById('calculateAdvisoryBtn').addEventListener('click', calculateAdvisory);
            document.getElementById('uploadImageBtn').addEventListener('click', uploadImage);
            
            // Officer dashboard buttons
            document.getElementById('sendAlertBtn').addEventListener('click', sendAlert);
            document.getElementById('sendRecommendationBtn').addEventListener('click', sendRecommendation);
            
            // Forum buttons
            document.getElementById('createPostBtn').addEventListener('click', createPost);
            
            // Navigation
            document.getElementById('nav-home').addEventListener('click', function(e) {
                e.preventDefault();
                showDashboard();
            });
            document.getElementById('nav-forum').addEventListener('click', function(e) {
                e.preventDefault();
                showForum();
            });
            document.getElementById('nav-about').addEventListener('click', function(e) {
                e.preventDefault();
                showAbout();
            });
        });

        // Login handler
        function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const role = document.getElementById('role').value;
            
            const errorDiv = document.getElementById('loginError');
            
            // Check credentials against dummy database
            if (dummyDatabase.users[username] && dummyDatabase.users[username].password === password) {
                if (dummyDatabase.users[username].role === role) {
                    currentUser = dummyDatabase.users[username];
                    showDashboard();
                    errorDiv.classList.add('d-none');
                } else {
                    errorDiv.textContent = "Selected role doesn't match user account.";
                    errorDiv.classList.remove('d-none');
                }
            } else {
                errorDiv.textContent = "Invalid username or password. Use farmer123/farmer123 or officer123/officer123 for demo.";
                errorDiv.classList.remove('d-none');
            }
        }

        // Logout handler
        function handleLogout() {
            currentUser = null;
            document.getElementById('loginSection').classList.remove('d-none');
            document.getElementById('farmerDashboard').classList.add('d-none');
            document.getElementById('officerDashboard').classList.add('d-none');
            document.getElementById('communityForum').classList.add('d-none');
            document.getElementById('aboutPage').classList.add('d-none');
            
            // Clear login form
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        // Show appropriate dashboard based on user role
        function showDashboard() {
            document.getElementById('loginSection').classList.add('d-none');
            document.getElementById('communityForum').classList.add('d-none');
            document.getElementById('aboutPage').classList.add('d-none');
            
            if (currentUser.role === 'farmer') {
                document.getElementById('farmerDashboard').classList.remove('d-none');
                document.getElementById('officerDashboard').classList.add('d-none');
                
                // Update farmer profile
                document.getElementById('soilType').value = currentUser.soilType;
                document.getElementById('landSize').value = currentUser.landSize;
                document.getElementById('currentCrop').value = currentUser.currentCrop;
                
                // Set values for advisory
                document.getElementById('soilTypeRecommendation').value = currentUser.soilType;
                document.getElementById('cropAdvisory').value = currentUser.currentCrop;
                document.getElementById('landSizeAdvisory').value = currentUser.landSize;
                
            } else if (currentUser.role === 'officer') {
                document.getElementById('farmerDashboard').classList.add('d-none');
                document.getElementById('officerDashboard').classList.remove('d-none');
            }
        }

        // Show community forum
        function showForum() {
            document.getElementById('loginSection').classList.add('d-none');
            document.getElementById('farmerDashboard').classList.add('d-none');
            document.getElementById('officerDashboard').classList.add('d-none');
            document.getElementById('aboutPage').classList.add('d-none');
            document.getElementById('communityForum').classList.remove('d-none');
        }

        // Show about page
        function showAbout() {
            document.getElementById('loginSection').classList.add('d-none');
            document.getElementById('farmerDashboard').classList.add('d-none');
            document.getElementById('officerDashboard').classList.add('d-none');
            document.getElementById('communityForum').classList.add('d-none');
            document.getElementById('aboutPage').classList.remove('d-none');
        }

        // Change language
        function changeLanguage() {
            const lang = document.getElementById('languageSelector').value;
            // In a real implementation, this would update all text on the page
            console.log("Language changed to: " + lang);
            // For this demo, we'll just show an alert
            alert("Language changed to " + lang + ". In a full implementation, all text would be translated.");
        }

        // Farmer dashboard functions
        function showEditProfile() {
            document.getElementById('farmerProfile').classList.add('d-none');
            document.getElementById('editProfileForm').classList.remove('d-none');
        }

        function saveProfile() {
            currentUser.soilType = document.getElementById('soilType').value;
            currentUser.landSize = parseFloat(document.getElementById('landSize').value);
            currentUser.currentCrop = document.getElementById('currentCrop').value;
            
            // Update displayed values
            document.querySelector('#farmerProfile p:nth-child(2)').innerHTML = '<strong>Soil Type:</strong> ' + document.getElementById('soilType').options[document.getElementById('soilType').selectedIndex].text;
            document.querySelector('#farmerProfile p:nth-child(3)').innerHTML = '<strong>Land Size:</strong> ' + currentUser.landSize + ' acres';
            document.querySelector('#farmerProfile p:nth-child(4)').innerHTML = '<strong>Current Crop:</strong> ' + document.getElementById('currentCrop').options[document.getElementById('currentCrop').selectedIndex].text;
            
            cancelEdit();
            
            // Show success message
            alert('Profile updated successfully!');
        }

        function cancelEdit() {
            document.getElementById('farmerProfile').classList.remove('d-none');
            document.getElementById('editProfileForm').classList.add('d-none');
        }

        function getRecommendation() {
            const soilType = document.getElementById('soilTypeRecommendation').value;
            const recommendedCrops = cropRecommendations[soilType];
            
            let cropList = '';
            recommendedCrops.forEach(crop => {
                cropList += '<li>' + crop + '</li>';
            });
            
            document.getElementById('cropRecommendationList').innerHTML = cropList;
        }

        function calculateAdvisory() {
            const crop = document.getElementById('cropAdvisory').value;
            const landSize = parseFloat(document.getElementById('landSizeAdvisory').value);
            const advisory = advisoryFormulas[crop];
            
            const seedAmount = (advisory.seeds * landSize).toFixed(1);
            const fertilizerAmount = (advisory.fertilizer * landSize).toFixed(0);
            const waterAmount = (advisory.water * landSize).toLocaleString();
            
            const cropName = document.getElementById('cropAdvisory').options[document.getElementById('cropAdvisory').selectedIndex].text;
            
            document.getElementById('advisoryResult').innerHTML = `
                <h5>Advisory for ${cropName} (${landSize} acres):</h5>
                <ul>
                    <li>Seed Amount: ${seedAmount} kg</li>
                    <li>Fertilizer: ${fertilizerAmount} kg (NPK ${fertilizerAmount * 0.4}kg, Urea ${fertilizerAmount * 0.6}kg)</li>
                    <li>Water Requirement: ${waterAmount} liters</li>
                </ul>
            `;
        }

        async function uploadImage() {
    const fileInput = document.getElementById('cropImageUpload');
    if (fileInput.files.length === 0) {
        alert('Please select an image first.');
        return;
    }

    const file = fileInput.files[0];
    const formData = new FormData();
    formData.append("file", file);

    try {
        // Replace with your actual Roboflow API key
        const API_KEY = "wGoBeTe8P9SEND85uczN";
        const MODEL_ID = "plant-disease-detection-z9xot/2";

        const response = await fetch(
            `https://detect.roboflow.com/${MODEL_ID}?api_key=${API_KEY}`,
            {
                method: "POST",
                body: formData
            }
        );

        const result = await response.json();
        console.log(result);

        if (result.predictions && result.predictions.length > 0) {
            let outputHTML = `<div class="alert alert-success"><strong>Detected Diseases:</strong><br>`;
            result.predictions.forEach(pred => {
                outputHTML += `- ${pred.class} (Confidence: ${(pred.confidence * 100).toFixed(2)}%)<br>`;
            });
            outputHTML += `</div>`;
            document.getElementById('diseaseResult').innerHTML = outputHTML;
        } else {
            document.getElementById('diseaseResult').innerHTML = `
                <div class="alert alert-info">
                    <strong>Analysis Result:</strong> No disease detected. Your crop appears healthy.
                </div>
            `;
        }

    } catch (error) {
        console.error("Error detecting disease:", error);
        document.getElementById('diseaseResult').innerHTML = `
            <div class="alert alert-danger">
                <strong>Error:</strong> Could not analyze the image. Please try again.
            </div>
        `;
    }
}

        // Officer dashboard functions
        function sendAlert() {
            const title = document.getElementById('alertTitle').value;
            const message = document.getElementById('alertMessage').value;
            
            if (!title || !message) {
                alert('Please fill in both title and message fields.');
                return;
            }
            
            // Add to dummy database
            dummyDatabase.alerts.unshift({
                title: title,
                content: message,
                date: new Date().toLocaleDateString()
            });
            
            alert('Alert sent successfully to all farmers!');
            document.getElementById('alertTitle').value = '';
            document.getElementById('alertMessage').value = '';
        }

        function sendRecommendation() {
            const farmer = document.getElementById('farmerSelect').value;
            const message = document.getElementById('recommendationText').value;
            
            if (!message) {
                alert('Please enter a recommendation message.');
                return;
            }
            
            const farmerName = document.getElementById('farmerSelect').options[document.getElementById('farmerSelect').selectedIndex].text;
            
            // Add to dummy database
            dummyDatabase.recommendations.unshift({
                to: farmerName,
                from: currentUser.name,
                message: message,
                date: new Date().toLocaleDateString()
            });
            
            alert(`Recommendation sent to ${farmerName} successfully!`);
            document.getElementById('recommendationText').value = '';
        }

        // Forum functions
        function createPost() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            
            if (!title || !content) {
                alert('Please fill in both title and content fields.');
                return;
            }
            
            // Add to dummy database
            dummyDatabase.forumPosts.unshift({
                title: title,
                author: currentUser.name,
                content: content,
                date: new Date().toLocaleDateString(),
                replies: []
            });
            
            alert('Forum post created successfully!');
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            
            // In a real implementation, we would update the forum display here
        }
    </script>
</body>
</html>